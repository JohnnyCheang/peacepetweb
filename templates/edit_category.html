{% extends "layout.html" %}
{% block content %}
<style>
/* 继承自 admin.html 的样式，确保一致性 */
.edit-container {
    max-width: 700px; 
    margin: 40px auto 80px; 
    background: white; 
    padding: 30px; 
    border-radius: 10px; 
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
}
.input-group-row {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
}
.input-group-row > div {
    flex: 1;
}
.input-group-row label {
    display: block;
    margin-bottom: 5px;
    font-weight: 600;
    font-size: 0.9rem;
}
.edit-container input[type="text"], 
.edit-container input[type="number"], 
.edit-container input[type="file"] {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    box-sizing: border-box;
    font-size: 0.9rem;
}
</style>

<div class="edit-container">
    <h2 class="serif" style="text-align: center; color: var(--primary, #375E97); margin-bottom: 25px;">编辑分类: {{ category['name_zh'] }}</h2>
    <a href="{{ url_for('admin', tab='categories') }}" style="display: inline-block; margin-bottom: 20px; color: var(--accent, #FB6542); text-decoration: none; font-weight: 600;">&larr; 返回分类管理</a>

    <form method="POST" enctype="multipart/form-data" action="{{ url_for('edit_category', cat_id=category['id']) }}">
        
        <div class="input-group-row">
            <div><label>分类名称 (EN)</label><input type="text" name="name_en" value="{{ category['name_en'] }}" required></div>
            <div><label>分类名称 (ZH)</label><input type="text" name="name_zh" value="{{ category['name_zh'] }}" required></div>
        </div>
        <div class="input-group-row">
            <div><label>URL Slug</label><input type="text" name="slug" value="{{ category['slug'] }}" required></div>
            <div><label>排序权重</label><input type="number" name="sort_order" value="{{ category['sort_order'] }}"></div>
        </div>
        
        <h4 style="margin-top: 25px;">二级页面 Banner 图</h4>
        {% if category['image'] %}
            <p style="font-size: 0.9rem; color: #555;">当前 Banner:</p>
            <img src="{{ category['image'] }}" style="max-height: 100px; border: 1px solid #ddd; border-radius: 5px; object-fit: contain; margin-bottom: 10px; display: block;">
            
            <label style="color: red; display: flex; align-items: center; cursor: pointer; margin-bottom: 15px;"><input type="checkbox" name="delete_image" style="width: 16px; margin-right: 5px;"> 删除当前 Banner 图片</label>
        {% endif %}

        <label>上传/替换 Banner 图片</label><input type="file" name="category_image" style="margin-bottom: 20px;">
        
        <button type="submit" class="btn" style="width: 100%; margin-top: 20px; background: var(--accent, #FB6542);">保存分类修改</button>
    </form>
</div>
{% endblock %}